@startuml

title Arquitectura de Aplicación Spring Boot - Sistema de Empleados

skinparam backgroundColor #FFFFFF
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam linetype ortho
skinparam nodesep 40
skinparam ranksep 30

skinparam package {
    BackgroundColor<<presentation>> #BBDEFB
    BackgroundColor<<business>> #C8E6C9
    BackgroundColor<<data>> #FFCCBC
    BackgroundColor<<persistence>> #B2DFDB
    BackgroundColor<<config>> #FFF9C4
    BorderColor #455A64
    FontStyle bold
    FontSize 13
}

skinparam component {
    BackgroundColor #E3F2FD
    BorderColor #1976D2
    FontSize 11
}

skinparam database {
    BackgroundColor #E8F5E9
    BorderColor #388E3C
}

skinparam note {
    BackgroundColor #FFFDE7
    BorderColor #FBC02D
    FontSize 10
}

' =============================================
' CAPA DE PRESENTACIÓN
' =============================================
package "Presentación Layer" <<presentation>> {
    [EmployeeMvcController] <<@Controller>>
    [RootController] <<@Controller>>
    [Templates] <<Thymeleaf>>
}

' =============================================
' CAPA DE LÓGICA DE NEGOCIO
' =============================================
package "Lógica de Negocio Layer" <<business>> {
    [EmployeeService] <<@Service>>
}

' =============================================
' CAPA DE ACCESO A DATOS
' =============================================
package "Acceso a Datos Layer" <<data>> {
    [EmployeeRepository] <<@Repository>>
    interface "CrudRepository<T,ID>" as CrudRepo
    [EmployeeEntity] <<@Entity>>
}

' =============================================
' CAPA DE PERSISTENCIA
' =============================================
package "Persistencia Layer" <<persistence>> {
    database "H2/MySQL Database" {
        [employees table]
    }
}

' =============================================
' CONFIGURACIÓN
' =============================================
package "Configuración" <<config>> {
    [application.properties]
    [schema.sql]
    [data.sql]
    [DemoApplication] <<@SpringBootApplication>>
}

' =============================================
' RELACIONES ENTRE CAPAS
' =============================================
[EmployeeMvcController] -down-> [EmployeeService] : uses
[RootController] -up-> [Templates] : renders
[EmployeeMvcController] -up-> [Templates] : renders

[EmployeeService] -down-> [EmployeeRepository] : uses
[EmployeeRepository] -right-> CrudRepo : extends
[EmployeeRepository] -down-> [EmployeeEntity] : manages

[EmployeeEntity] -down-> [employees table] : maps to
[schema.sql] -right-> [employees table] : creates
[data.sql] -right-> [employees table] : populates

[DemoApplication] -right-> [application.properties] : loads config

' =============================================
' NOTAS INFORMATIVAS
' =============================================
note right of [EmployeeMvcController]
    Maneja requests HTTP
    GET /employees
    POST /employees
    GET /employees/{id}/edit
    POST /employees/{id}/delete
end note

note right of [EmployeeService]
    Lógica de negocio
    - getAll()
    - getById()
    - createOrUpdate()
    - delete()
end note

note right of [EmployeeRepository]
    Acceso a datos
    extends CrudRepository
    + findByEmail()
end note

note right of [EmployeeEntity]
    Entidad JPA
    @Entity employees
    - id (PK)
    - firstName
    - lastName
    - email (unique)
end note

' =============================================
' LEYENDA
' =============================================
legend bottom
    |= Color |= Capa |
    |<#BBDEFB>| Presentación |
    |<#C8E6C9>| Lógica de Negocio |
    |<#FFCCBC>| Acceso a Datos |
    |<#B2DFDB>| Persistencia |
    |<#FFF9C4>| Configuración |
    
    **Tecnologías:** Spring Boot 3.x | Spring MVC | Spring Data JPA | Thymeleaf | H2/MySQL | Maven
endlegend

@enduml
